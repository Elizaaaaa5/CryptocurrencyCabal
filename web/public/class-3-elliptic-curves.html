<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Class 3: Elliptic Curves
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Bitcoin Class taught at University of Virginia">
    <meta name="keywords" content="bitcoin,cryptocurrency,class,bitcoin mining,cryptocurrency course, bitcoin course, bitcoin class">
    <meta name="author" content="David Evans">
    <link rel="icon" type="image/png" href="http://www.rust-class.org/static/images/logo.png" />  
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>

    <!-- Le styles -->
    <link rel="stylesheet" href="http://bitcoin-class.org/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
     .about {
        font-size: 8pt;
        font-color: "gray";
     }
    </style>
    <link href="http://bitcoin-class.org/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="http://bitcoin-class.org/theme/css/font-awesome.css" rel="stylesheet">

    <link href="http://bitcoin-class.org/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://bitcoin-class.org/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="http://bitcoin-class.org/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://bitcoin-class.org/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://bitcoin-class.org/theme/images/apple-touch-icon-114x114.png">

    <link href="http://bitcoin-class.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cryptocurrency Cafe ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="http://bitcoin-class.org/index.html">Cryptocurrency Cafe </a>
          <div class="nav-collapse">
            <ul class="nav">
                  <li><a href="/pages/classes.html"><b>Classes</b></a></li>
                  <li><a href="/">&middot</a></li>
                  <li><a href="/pages/forum.html"><b>Forum</b></a></li>
                  <li><a href="/">&middot</a></li>
                  <li><a href="/pages/ps0.html">PS0</a></li>
                  <li><a href="/pages/project1.html">Project 1</a></li>
                  <li><a href="/pages/project2.html">Project 2</a></li>
                  <li><a href="/pages/final-projects.html"><b>Final Projects</b></a></li>
                  <li><a href="/">&middot</a></li>
                  <li><a href="/pages/resources.html"><b>Resources</b></a></li>

                          <ul class="nav pull-right">
                                <li><a href="http://bitcoin-class.org/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
<section id="content">
        <article>
                <header>
<div class="whighlight">This is the archived Spring 2015 version of the course.  For the most recent version, see <a href="http://bitcoin-class.org">http://bitcoin-class.org</a>.</div>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to Class 3: Elliptic Curves">
                                        Class 3: Elliptic Curves
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="quietlabel">Posted: </span>
<abbr class="published" title="2015-01-21T00:00:00-05:00">
    Wed 21 January 2015
</abbr>
<!-- <span class="quietlabel">by</span>
<a href="http://bitcoin-class.org/author/david-evans.html">David Evans</a>
-->
<!--
<span class="label">Category</span>
<a href="http://bitcoin-class.org/category/class3.html"><i class="icon-folder-open"></i>class3</a>.
-->

<!--
-->
</footer><!-- /.post-info -->                </div>
                <p><div class="phighlight">
   <a href="http://bitcoin-class.org/classes/class3/class3.pdf">PDF version for printing</a>
   </div></p>
<h2>Schedule</h2>
<p><div class="todo">
<a href="http://bitcoin-class.org/pages/project1.html">Project 1</a> is due <strong>Friday, 30 January</strong>. </p>
<p>Before the next class (Monday, Jan 26): </p>
<ul>
<li>
<p><strong>Read:</strong> Satoshi Nakamoto, <a href="https://bitcoin.org/bitcoin.pdf"><em>Bitcoin: A Peer-to-Peer Electronic Cash
System</em></a>, 2008.  The is the original
bitcoin paper, which is quite readable.</p>
</li>
<li>
<p><strong>Read:</strong> <a href="https://github.com/aantonop/bitcoinbook/blob/develop/ch05.asciidoc"><em>Chapter 5:
    Transactions</em></a>
    from Andreas Antonopoulos' book.
   </div></p>
</li>
</ul>
<p><center> 
<iframe src="//www.slideshare.net/slideshow/embed_code/43761680" width="476" height="400" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe><br>
<div class="caption">Note: due to a bug in
slideshare's updated player, ink markings no longer appear in the
viewer.  <br>If you download the slides, they are present though.
Hopefully, the player will be fixed someday. </div>
</center></p>
<h3>Asymmetric Cryptosystems Recap</h3>
<p>For asymmetric cryptography, we need a one-way function with a trapdoor:
a function that can be easily inverted given a secret key, but is hard
to invert without knowledge of that key.</p>
<p><strong>Signatures:</strong> Signer encrypts a message with her own private key.
  Verifier checks the message using the signer's public key.</p>
<h2>Elliptic Curve Cryptography</h2>
<p><strong>Elliptic curve:</strong> points satisfying an equation like <span
class="math"><em>y</em><sup>2</sup> = <em>x</em><sup>3</sup> + 7</span> (this is the curve
used in bitcoin).</p>
<p>For real numbers, this is <a href="http://www.wolframalpha.com/input/?i=y%5E2+%3D+x%5E3+%2B+7">easy to solve</a>:
<span class="math"><em>y</em> = sqrt(<em>x</em><sup>3</sup> + 7)</span>.</p>
<p>In a finite field, it is complex enough to form the basis of cryptographic operations.</p>
<h2>Crash Course in Group Theory</h2>
<p><strong>Group:</strong> A group is a set, <span class="math"><em>G</em></span>, on which the operation <span class="math">&oplus;</span> is defined with the following properties:</p>
<ol>
<li>
<p><em>Closure</em>: for all <span class="math"><em>a</em>, <em>b</em> &isin; <em>G</em></span>, <span class="math"><em>a</em> &oplus; <em>b</em> &isin; <em>G</em></span>.</p>
</li>
<li>
<p><em>Associative</em>: for all <span class="math"><em>a</em>, <em>b</em>, <em>c</em> &isin; <em>G</em></span>, <span class="math">(<em>a</em> &oplus; <em>b</em>) &oplus; <em>c</em> = <em>a</em> &oplus; (<em>b</em> &oplus; <em>c</em>)</span>.</p>
</li>
<li>
<p><em>Identity</em>: there is some element, <span class="math"><b>0</b> &isin; <em>G</em></span>, such that for all <span class="math">a &isin; <em>G</em></span>, <span class="math"><em>a</em> &oplus; <b>0</b> = <b>0</b> &oplus; <em>a</em> = <em>a</em><span>.</p>
</li>
<li>
<p><em>Inverse</em>: for all <span class="math"><em>a</em> &isin; <em>G</em></span>, there exists an inverse, <span class="math">-<em>a</em> &isin; <em>G</em></span>, such that <span class="math"><em>a</em> &oplus; (-<em>a</em>) = <b>0</b></span>.</p>
</li>
</ol>
<p><strong>Abelian Group:</strong> An abelian (or commutative) group has this additional property:</p>
<ul>
<li><em>Commutative</em>: for all <span class="math"><em>a</em>, <em>b</em> &isin; <em>G</em></span>, <span class="math"><em>a</em> &oplus; <em>b</em> = <em>b</em> &oplus; <em>a</em></span>.</li>
</ul>
<p>Are the integers and addition an abelian group?
<div class="gap">
</div></p>
<p>Are the whole numbers and addition an abelian group?
<div class="gap">
</div></p>
<p><strong>Finite Field:</strong> A finite field is a set <span class="math"><em>F</em></span> of <span class="math"><em>N</em> &ge; 2</span> elements on which the operators <span class="math">&oplus;</span> and <span class="math">&times;</span> are defined with these properties:</p>
<ol>
<li>
<p><span class="math"><em>F</em></span> is an <em>abelian group</em> with identity <span class="math"><b>0</b></span> under the <span class="math">&oplus;</span> operation.  </p>
</li>
<li>
<p>The set <span class="math"><em>F</em> - { 0 }</span> is an <em>abelian group</em> with identity <span class="math"><b>1</b></span> under the <span class="math">&times;</span> operation.</p>
</li>
<li>
<p>Distributive: For all <span class="math"><em>a</em>, <em>b</em>, <em>c</em> &isin; <em>F</em></span>, <span class="math">(<em>a</em> &oplus; <em>b</em>) &times; <em>c</em> = (<em>a</em> &times; <em>c</em>) &oplus; (<em>b</em> &times; <em>c</em>)</span>.</p>
</li>
</ol>
<p>(Note that this requires for all <span class="math"><em>a</em></span>, <span class="math"><em>a</em> &times; <b>0</b> = <b>0</b></span>.)</p>
<p><strong>Prime Field Theorem:</strong> For every prime number <span
  class="math"><em>p</em></span>, the set <span class="math">{ 0, 1, &hellip;, <em>p</em>
  - 1 }</span> forms a finite field with the operations addition and
  multiplication modulo <span class="math">p</span>.</p>
<p>Demonstrate that <span class="math"><em>F</em><sub>3</sub></span> is a finite field.
<div class="gap"></p>
</div>

<p>See <a href="http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-451-principles-of-digital-communication-ii-spring-2005/lecture-notes/chap7.pdf"><em>Introduction to Finite
Fields</em></a>
(notes from David Forney's <a href="http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-451-principles-of-digital-communication-ii-spring-2005/index.htm">MIT 6.451
course</a>)
for a proof that all prime fields, <span
class="math">F<sub>p</sub></span> are finite fields, and more thorough
introduction to finite fields.</p>
<h2>Operations on Elliptic Curves</h2>
<p>"Addition" on an elliptic curve is done by finding the a point on the
line between the two inputs points, and reflecting that point over the
x-axis.</p>
<p>Here's what this looks like for real numbers (but don't be mislead
&mdash; elliptic curves over finite fields do not look anything like
these simple curves):</p>
<p><center>
   <img src="http://media.coindesk.com/2014/10/point-addition.png"><br>
Image source: Eric Rykwalder, <a href="http://www.coindesk.com/math-behind-bitcoin/"><em>The Math Behind Bitcoin</em></a>.
   </center></p>
<p><span class="math"><em>P</em> + <em>Q</em> = <em>R</em></span></p>
<p>Doing addition on elliptic curves over finite fields is more complex,
and there has been a lot of research into how to do these operations
efficiently.  See the
<a href="https://github.com/btcsuite/btcec/blob/master/btcec.go#L431">btcec.Add</a>
code for how it is done in the library.</p>
<p>Doubling (e.g., <span class="math"><em>P</em> + <em>P</em> = <em>R</em></span>) is the same idea,
except instead of finding the intersection of the line formed by the two
addends (which doesn't exist for the single point), finds the
intersection between the tangent of the curve.</p>
<p>"Multiplication" is just repeated addition: <span class="math"><em>kP</em> = <em>P</em> +
<em>P</em> + ... + <em>P</em></span>.</p>
<p>Is there a more efficient way to compute <span class="math">9_P_</span> than using 8 additions?<br />
<div class="gap"></p>
</div>
                </div><!-- /.entry-content -->
                <div class="comments">
                <h2>Comments</h2>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
                           var disqus_identifier = "class-3-elliptic-curves.html";
                           (function() {
                                var dsq = document.createElement('script');
                                dsq.type = 'text/javascript'; dsq.async = true;
                                dsq.src = 'http://bitcoin-class.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] ||
                                 document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                        </script>
                </div>
        </article>
</section>

<script type="text/javascript">
    var disqus_shortname = 'bitcoin-class';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
</script>

      <hr>

      <footer>
	<div id="footer">
        <address id="about">
          <a href="/">Cryptocurrency Cafe</a>, Spring 2015<br>      
          <a href="http://www.cs.virginia.edu">University of Virginia Computer Science</a><br>
	  <p align="right"><font color="grey" size="-2"> Site built using <a href="http://pelican.notmyidea.org/">Pelican</a>.  Theme uses <a href="http://twitter.github.com/bootstrap/">Bootstrap</a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome</a>.</p>
        </address><!-- /#about -->
	</div>
      </footer>

    </div><!--/.fluid-container-->


<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-3775212-12']);
_gaq.push(['_setDomainName', 'bitcoin-class.org']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript';
  ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
  'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s);
})();

</script>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://bitcoin-class.org/theme/js/jquery-1.7.2.min.js"></script>
    <script src="http://bitcoin-class.org/theme/js/bootstrap.min.js"></script>
  </body>
</html>