<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cryptocurrency Cafe - David Evans</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Bitcoin Class taught at University of Virginia">
    <meta name="keywords" content="bitcoin,cryptocurrency,class,bitcoin mining,cryptocurrency course, bitcoin course, bitcoin class">
    <meta name="author" content="David Evans">
    <link rel="icon" type="image/png" href="http://www.rust-class.org/static/images/logo.png" />  
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>

    <!-- Le styles -->
    <link rel="stylesheet" href="http://bitcoin-class.org/0/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
     .about {
        font-size: 8pt;
        font-color: "gray";
     }
    </style>
    <link href="http://bitcoin-class.org/0/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="http://bitcoin-class.org/0/theme/css/font-awesome.css" rel="stylesheet">

    <link href="http://bitcoin-class.org/0/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://bitcoin-class.org/0/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="http://bitcoin-class.org/0/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://bitcoin-class.org/0/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://bitcoin-class.org/0/theme/images/apple-touch-icon-114x114.png">

    <link href="http://bitcoin-class.org/0/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Cryptocurrency Cafe ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="http://bitcoin-class.org/0/index.html">Cryptocurrency Cafe </a>
          <div class="nav-collapse">
            <ul class="nav">
                  <li><a href="/pages/classes.html"><b>Classes</b></a></li>
                  <li><a href="/">&middot</a></li>
                  <li><a href="/pages/forum.html"><b>Forum</b></a></li>
                  <li><a href="/">&middot</a></li>
                  <li><a href="/pages/ps0.html">PS0</a></li>
                  <li><a href="/pages/project1.html">Project 1</a></li>
                  <li><a href="/pages/project2.html">Project 2</a></li>
                  <li><a href="/pages/final-projects.html"><b>Final Projects</b></a></li>
                  <li><a href="/">&middot</a></li>
                  <li><a href="/pages/resources.html"><b>Resources</b></a></li>

                          <ul class="nav pull-right">
                                <li><a href="http://bitcoin-class.org/0/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
	<section id="sidebar">
          <p>
	    <a href="http://www.virginia.edu"><b>University&nbsp;of&nbsp;Virginia</b></a>
	    Spring&nbsp;2015<br>
	    <a href="http://www.cs.virginia.edu/evans/">David&nbsp;Evans</a>
	  </p>
	  <p>
	  <div class="separator"></div>
<h3>
<a href="https://www.google.com/calendar/embed?src=rmjagdrnmu3a9h2q5199lg4t28%40group.calendar.google.com&ctz=America/New_York">Calendar</a>
</h3>
<h3>
<a href="./pages/forum.html">Forum</a>
</h3>
<h3><a href="./pages/syllabus.html">Syllabus</a>
</h3>

	  <div class="separator"></div>
	  <h3>Projects</h3>
<ul>
<li> <a href="./pages/ps0.html">0: Registration</a>
<li> <a href="./pages/project1.html">1: Bitcoin Transactions</a>
<li> <a href="./pages/project2.html">2: Mining PointCoin</a>
<li> <a href="./pages/final-projects.html"><b>Final Projects</b></a>
<li> &nbsp;</li>
<li> <a href="./pages/project-ideas.html">Project Ideas</a>
</ul>
	  <div class="separator"></div>
	  <h3><A href="./pages/classes.html">Classes</a></h3>
<ul>
<li> &nbsp;<a href="./class-1-why-are-these-buildings-burning-down.html">1: Burning Down</a>
<li> &nbsp;<a href="./class-2-cryptography.html">2: Cryptography</a>
<li> &nbsp;<a href="./class-3-elliptic-curves.html">3: Elliptic Curves</a>
<li> &nbsp;<a href="./class-4-verifiably-random.html">4: Verifiably Random</a>
<li> &nbsp;<a href="./class-5-digicash.html">5: DigiCash</a>
<li> &nbsp;<a href="./class-6-proofs-of-work.html">6: Proofs of Work</a>
<li> &nbsp;<a href="./class-7-merkle-trees.html">7: Merkle Trees</a>
<li> &nbsp;<a href="./class-8-review-and-project-2.html">8: Project 2</a>
<li> &nbsp;<a href="./class-9-mining.html">9: Mining</a>
<li> &nbsp;<a href="./class-10-more-mining.html">10: More Mining</a>
<li> &nbsp;<a href="./class-11-pools-and-profits.html">11: Pools and Profits</a>
<li> &nbsp;<a href="./class-12-mostly-about-superfish.html">12: Superfish!</a>
<li> &nbsp;<a href="./class-13-quiz-2.html">13: Quiz 2</a>
<li> &nbsp;<a href="./class-14-selfish-mining.html">14: Selfish Mining</a>
<li> &nbsp;<a href="./class-15-script.html">15: Script</a>
<li> &nbsp;<a href="./class-16-alternate-cryptocurrencies.html">16: Alternate Cryptocurrencies</a>
<li> &nbsp;<a href="./class-18-useful-proofs-of-work.html">18: Useful PoW</a>
<li> &nbsp;<a href="./class-19-josh-cincinnati-visit.html">19: Josh Cincinnati</a>
<li> &nbsp;<a href="./class-20-project-proposal-presentations-1.html">20: Projects 1</a>
<li> &nbsp;<a href="./class-21-project-proposal-presentations-2.html">21: Projects 2</a>
<li> &nbsp;<a href="./class-22-subsidies-ombuds-melange.html">22: Melange</a>
<li> &nbsp;<a href="./class-23-sidechains.html">23: Blooming Sidechains!</a>
<li> &nbsp;<a href="./class-24-silk-road.html">24: Silk Road</a>
<li> &nbsp;<a href="./class-25-proof-of-reserve.html">25: Proof-of-Reserve</a>
<li> &nbsp;<a href="./class-26-presentations-1.html">26: Presentations 1</a>
<li> &nbsp;<a href="./class-27-presentations-2.html">27: Presentations 2</a>
<li> &nbsp;<a href="./class-28-presentations-3.html">28: Presentations 3</a>
</ul>

<p><br></br></p>
<p><br></br></p>

<ul>
<li>
<a href="./pages/using-materials.html">Using These Materials</a>
</ul>

	</section>
</section>


<section id="mainbody">

<div class="whighlight">This is the archived Spring 2015 version of the course.  For the most recent version, see <a href="http://bitcoin-class.org">http://bitcoin-class.org</a>.</div>

<!--
<div id="calendar">
<iframe src="https://www.google.com/calendar/embed?showTitle=0&amp;showNav=0&amp;showDate=0&amp;showPrint=0&amp;showCalendars=0&amp;showTz=0&amp;mode=AGENDA&amp;height=600&amp;wkst=2&amp;bgcolor=%23ffffff&amp;src=7ibtm6lnt88vl00h7a0e8n0bc4%40group.calendar.google.com&amp;color=%23711616&amp;ctz=America%2FNew_York" style=" border:solid 1px #777 " width="200" height="600" frameborder="0" scrolling="no">
</iframe>
</div>
-->


        <div class="article">
 
                   <h1><a href="http://bitcoin-class.org/0/pointcoin-pizza.html">PointCoin Pizza</a></h1>
                   <div class="well small"><footer class="post-info">
<span class="quietlabel">Posted: </span>
<abbr class="published" title="2015-02-21T00:00:00-05:00">
    Sat 21 February 2015
</abbr>
<!-- <span class="quietlabel">by</span>
<a href="http://bitcoin-class.org/0/author/david-evans.html">David Evans</a>
-->
<!--
<span class="label">Category</span>
<a href="http://bitcoin-class.org/0/category/announcements.html"><i class="icon-folder-open"></i>announcements</a>.
-->

<!--
-->
</footer><!-- /.post-info --></div>
                   <div class="content"><p>The PointCoin currency has now reached the level of stability and market
acceptance, that merchants are beginning to accept it!</p>
<p><a href="http://pizza.bitcoin-class.com/"><strong>PointCoin Pizza</strong></a> is now open and
accepting orders.  </p>
<p>Note that PointCoin Pizza's opening hours are unpredicatable and
unannounced, so there is no guarantee that your pizza order will be
delivered within a reasonable time.  The price of pizza is currently 150
PTC, but it may go up rapidly depending on market conditions.</p>
<p>Spend your PointCoins carefully, though.  You don't want to be reading about
<a href="http://www.forbes.com/sites/ericmack/2013/12/23/the-bitcoin-pizza-purchase-thats-worth-7-million-today/"><em>The Bitcoin Pizza Purchase That's Worth $7 Million Today</em></a>.</p></div>
<div class="commentstag"><a href="http://bitcoin-class.org/0/pointcoin-pizza.html#disqus_thread" data-disqus-identifier="pointcoin-pizza">Comments</a></div>
                   <hr />
        </div>

        <div class="article">
 
                   <h1><a href="http://bitcoin-class.org/0/class-11-pools-and-profits.html">Class 11: Pools and Profits</a></h1>
                   <div class="well small"><footer class="post-info">
<span class="quietlabel">Posted: </span>
<abbr class="published" title="2015-02-18T00:00:00-05:00">
    Wed 18 February 2015
</abbr>
<!-- <span class="quietlabel">by</span>
<a href="http://bitcoin-class.org/0/author/david-evans.html">David Evans</a>
-->
<!--
<span class="label">Category</span>
<a href="http://bitcoin-class.org/0/category/class11.html"><i class="icon-folder-open"></i>class11</a>.
-->

<!--
-->
</footer><!-- /.post-info --></div>
                   <div class="content"><h2>Schedule</h2>
<p><div class="todo"> </p>
<ul>
<li>
<p><a href="http://bitcoin-class.org/0/pages/project2.html">Project 2</a>, Part 1 is due <strong>Sunday, 22 February</strong>.  </p>
</li>
<li>
<p>Quiz 2 will be in class on <strong>Wednesday, 25 February</strong>.  It will be similar in length, format, and content to Quiz 1 (except will cover material from the beginning of the class through </p>
</li>
<li>
<p>Continue thinking about project ideas! </p>
</li>
</ul>
</div>

<p><center> 
<iframe src="//www.slideshare.net/slideshow/embed_code/44858338" width="670" height="380" frameborder="2" marginwidth="0" marginheight="0" scrolling="no"></iframe>
<div class="caption">Note: due to a bug in
slideshare's updated player, ink markings no longer appear in the
viewer.  <br>If you <a href="http://bitcoin-class.org/0/classes/class11/class11-inked.pptx">download the slides</a>, they are present though.
Hopefully, the player will be fixed someday. </div>
</center></p>
<h1>Mining Model</h1>
<p>Mining Harware on the market today: <a href="http://www.spondoolies-tech.com/products/holiday-special-sp20-jackson-shipping-from-stock">Spondoolies SP20</a> (this is just an example, certainly not a commercial endorsement!)</p>
<p><div class="indented">
<strong>Cost:</strong> US$ 479<br />
<strong>Hash rate:</strong> 1.7 TH/s<br />
<strong>Power use:</strong> 1200 W<br />
<strong><a href="https://encrypted.google.com/search?hl=en&amp;q=BTC%20to%20USD">BTC Price</a>:</strong> US$ 240<br />
<strong>Difficulty:</strong> 44455415962 # from https://blockchain.info/stats, 18 Feb 2015
    </div></p>
<p><a href="https://docs.google.com/spreadsheet/ccc?key=0AiFMBvXvL2dtdEZkR2J4eU5rS3B4ei1iUmJxSWNlQ0E#gid=0">This
spreadsheet</a>
has lots of information about bitcoin difficulty over time.</p>
<p><div class="warning">
<strong>Please don't make any investment decisions based on any of these models!</strong>  Even the best one is still much simplified and with many guesses (e.g., assumption that BTC value will not change, slow increase in difficulty).
   </div></p>
<h3>Super Simple Model</h3>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">expected_hashes</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.7</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">12</span><span class="p">)</span>
<span class="mf">112314445.6981567</span> <span class="c"># expected seconds to find block</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
<span class="mf">1299.935714099036</span> <span class="c"># days to find block</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">block_value</span> <span class="o">=</span> <span class="mi">240</span> <span class="o">*</span> <span class="mi">25</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">earnings_per_year</span> <span class="o">=</span> <span class="n">block_value</span> <span class="o">*</span> <span class="p">(</span><span class="mf">365.25</span> <span class="o">/</span> <span class="mi">1300</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">earnings_per_year</span>
<span class="mf">1685.769230769231</span>
<span class="sb">````</span>

<span class="n">Why</span> <span class="ow">is</span> <span class="n">this</span> <span class="n">estimate</span> <span class="n">of</span> <span class="n">expected</span> <span class="n">earnings</span> <span class="n">totally</span> <span class="n">broken</span><span class="err">?</span>
<span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;gap&quot;</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

<span class="c">### Better Model</span>

<span class="n">Python</span> <span class="n">code</span> <span class="p">(</span><span class="n">excerpted</span> <span class="n">below</span><span class="p">):</span> <span class="p">[</span><span class="n">mining</span><span class="o">.</span><span class="n">py</span><span class="p">](</span><span class="o">|</span><span class="n">filename</span><span class="o">|./</span><span class="n">mining</span><span class="o">-</span><span class="n">simple</span><span class="o">.</span><span class="n">py</span><span class="p">)</span>

<span class="sb">``</span><span class="err">`</span><span class="n">python</span>
<span class="k">def</span> <span class="nf">guess_difficulty</span><span class="p">(</span><span class="n">month</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">difficulty</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">rate_of_difficulty</span><span class="p">)</span> <span class="o">**</span> <span class="n">month</span><span class="p">)</span>

<span class="n">hash_rate</span> <span class="o">=</span> <span class="mf">1.7</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">12</span> <span class="c"># 1.7 Th/s</span>
<span class="n">hashes_in_month</span> <span class="o">=</span> <span class="n">hash_rate</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="n">ave_days_in_month</span>
<span class="n">block_value</span> <span class="o">=</span> <span class="mi">25</span> <span class="o">*</span> <span class="mi">240</span> <span class="c"># assumes fixed BTC value </span>
<span class="n">electricity_cost</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.2</span> <span class="o">*</span> <span class="n">kWh</span><span class="p">)</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="n">ave_days_in_month</span>

<span class="k">def</span> <span class="nf">expected_revenue</span><span class="p">(</span><span class="n">month</span><span class="p">):</span>
    <span class="n">success_probability</span> <span class="o">=</span> <span class="n">find_target</span><span class="p">(</span><span class="n">guess_difficulty</span><span class="p">(</span><span class="n">month</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">**</span><span class="mi">256</span> 
    <span class="k">return</span> <span class="n">block_value</span> <span class="o">*</span> <span class="n">hashes_in_month</span> <span class="o">*</span> <span class="n">success_probability</span>

<span class="k">def</span> <span class="nf">cumulative_income</span><span class="p">(</span><span class="n">months</span><span class="p">):</span>
    <span class="n">income</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">month</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">months</span><span class="p">):</span>
        <span class="n">income</span> <span class="o">+=</span> <span class="n">expected_revenue</span><span class="p">(</span><span class="n">month</span><span class="p">)</span> <span class="o">-</span> <span class="n">electricity_cost</span>
    <span class="k">return</span> <span class="n">income</span>
</pre></div>


<p>Given this model, when should the miner be turned off and turned to scrap?
<div class="gap"></p>
</div>

<p>Bitcoin core code: <a href="https://github.com/bitcoin/bitcoin/blob/175d86e633bedcfb642fb326f1ec0b43c14c4f3b/src/main.cpp#L1229">GetBlockValue</a>, <a href="https://github.com/bitcoin/bitcoin/blob/31dedb463b0ce77364e516239bf1b9c7eed5b3b0/src/chainparams.cpp">ChainParams</a></p>
<p>What should happen to the bitcoin difficulty when subsidy is halved after block 420,000?
(Current block is 344,044 so we should reach block 420,000 in (420000-34400 / (6 * 24)) = 527 days.)
<div class="gap"></p>
</div>

<h1>Mining Pools</h1>
<p>How can an open mining pool fairly determine miners share of the reward?  Why is it not sensible to use actual blocks mined to estminate pool share?
<div class="gap"></p>
</div>

<p>What are the risks of a mining pool controlling a large fraction over
the hashing power?  Does anything dramatic happen when that fraction
exceeds 50%?</p>
<div class="gap">

</div>

<h1>Links</h1>
<p><a href="http://hackingdistributed.com/2014/06/13/time-for-a-hard-bitcoin-fork/"><em>What Happens At Armageddon?</em></a>
(Ittay Eyal and Emin G&uuml;n Sirer, 13 June 2014)</p>
<p><a href="https://bitcointalk.org/?topic=441465.msg7282674#msg7282674">Discussion about Eligius Block Witholding Attack</a></p></div>
<div class="commentstag"><a href="http://bitcoin-class.org/0/class-11-pools-and-profits.html#disqus_thread" data-disqus-identifier="class-11-pools-and-profits">Comments</a></div>
                   <hr />
        </div>

        <div class="article">
 
                   <h1><a href="http://bitcoin-class.org/0/project-2-new-network-up.html">Project 2 - New Network Up</a></h1>
                   <div class="well small"><footer class="post-info">
<span class="quietlabel">Posted: </span>
<abbr class="published" title="2015-02-17T00:00:00-05:00">
    Tue 17 February 2015
</abbr>
<!-- <span class="quietlabel">by</span>
<a href="http://bitcoin-class.org/0/author/david-evans.html">David Evans</a>
-->
<!--
<span class="label">Category</span>
<a href="http://bitcoin-class.org/0/category/announcements.html"><i class="icon-folder-open"></i>announcements</a>.
-->

<!--
-->
</footer><!-- /.post-info --></div>
                   <div class="content"><p>The new PointCoin network is now up!  This fixes the reset problem and
some other issues that were discussed in Monday's class.  It also sets
the expected block generating time to 10 minutes and the mining reward
to 10 PointCoin.</p>
<p>To migrate your node to the PointCoin 0.2 network follow these directions:</p>
<ul>
<li><a href="https://github.com/PointCoin/pointcoind/wiki/Migration">Migration</a></li>
</ul>
<p>Once you have your node running on the new network, add your public IP address here:</p>
<ul>
<li><a href="https://github.com/PointCoin/pointcoind/wiki/Publicly-Listed-IP-Address">Node Addresses</a></li>
</ul>
<p>There is no automatic peering.  We believe this is a design decision in
btcd (which pointcoind is forked from), to not trust any node that is
not announced by multiple other nodes.</p>
<p>You can see the blockchain at:
<a href="http://blockexplorer.bitcoin-class.org/"><em>http://blockexplorer.bitcoin-class.org/</em></a>.
We will consider this the canonical PointCoin blockchain (at least until
next Monday, when you can start launching attacks).</p>
<p>Because of the problems with the network, it is no longer necessary to
acquire 100 PointCoin to earn full credit for Problem 1.  It is
sufficient to successfully mine at least one block.  Earning more
PointCoin will still be beneficial though!  You'll have other
opportunities to use it.</p>
<p>Thanks a bunch to Alex and Nick for tremendous work getting this
working!  It seems to be stable, and our nodes (including nodes running
on EC2 micro instances) have been stable (no crashes) for more than 24
hours now, so we're optimistic there will not be further problems.</p>
<p>I'm really sorry for the confusion and trouble this has caused, not to
mention the PointCoins you've lost that you may have mined successfully
on the original network.  I think we'll learn a lot from trying to
launch a cryptocurrency, and there is plenty that can go wrong.</p></div>
<div class="commentstag"><a href="http://bitcoin-class.org/0/project-2-new-network-up.html#disqus_thread" data-disqus-identifier="project-2-new-network-up">Comments</a></div>
                   <hr />
        </div>

        <div class="article">
 
                   <h1><a href="http://bitcoin-class.org/0/class-10-more-mining.html">Class 10: More Mining</a></h1>
                   <div class="well small"><footer class="post-info">
<span class="quietlabel">Posted: </span>
<abbr class="published" title="2015-02-16T00:00:00-05:00">
    Mon 16 February 2015
</abbr>
<!-- <span class="quietlabel">by</span>
<a href="http://bitcoin-class.org/0/author/david-evans.html">David Evans</a>
-->
<!--
<span class="label">Category</span>
<a href="http://bitcoin-class.org/0/category/class10.html"><i class="icon-folder-open"></i>class10</a>.
-->

<!--
-->
</footer><!-- /.post-info --></div>
                   <div class="content"><h2>Schedule</h2>
<p><div class="todo"> </p>
<ul>
<li>
<p><a href="http://bitcoin-class.org/0/pages/project2.html">Project 2</a>, Part 1 is due <strong>Sunday, 22 February</strong>.  Part 2 will begin afte class on Monday, 23 February and is due on Thursday, 5 March.</p>
</li>
<li>
<p>Start (continue!) thinking of ideas for your final project.  I've posted a few starting ideas <a href="http://bitcoin-class.org/0/pages/project-ideas.html">on the course site</a>.  The first major deliverable for the final project will be a project proposal (due <strong>20 March</strong>)</p>
</li>
<li>
<p>Reading: finish reading through <a href="https://github.com/aantonop/bitcoinbook/blob/develop/ch08.asciidoc"><em>Chapter 8: Mining and Consensus</em></a>.</p>
</li>
</ul>
</div>

<p><center> 
<iframe src="//www.slideshare.net/slideshow/embed_code/44794648" width="670" height="380" frameborder="2" marginwidth="0" marginheight="0" scrolling="no"></iframe>
<div class="caption">Note: due to a bug in
slideshare's updated player, ink markings no longer appear in the
viewer.  <br>If you <a href="http://bitcoin-class.org/0/classes/class10/class10-inked.pptx">download the slides</a>, they are present though.
Hopefully, the player will be fixed someday. </div>
</center></p>
<h1>Final Project</h1>
<p>Your main assignment after finishing Project 2 will be an open-ended
project.  You can work on anything you want that is related to
cryptocurrency (loosely defined), so long as you can convince me it will
be interesting and worthwhile.  My hope is everyone will do a project
that will have significant value beyond just our class.</p>
<p>You can work alone or in a team of any size.  The impressiveness of your
project should scale with the size of your team (but not linearly, since
there is added communication overhead as your team size increases).  It
should scale as at least <span class="math"><em>N</em><sup>2/3</sup></span>
where <span class="math"><em>N</em></span> is the number of students in the
course on your team.  (You are welcome to enlist help from people not in
the class, and they don't count towards your <span
class="math"><em>N</em></span> value.)</p>
<h1>Forking PointCoin</h1>
<p>What causes a blockchain to fork?
<div class="gap"></p>
</div>

<p>If all the trans-pacific network cables (there are <a href="http://www.submarinecablemap.com/">only about
12</a>) were cut, what would happen to
the bitcoin blockchain?
<div class="gap"></p>
</div>

<h1>Asymptotic Analysis</h1>
<p>When is asymptotic analysis useful?
<div class="gap">
</div></p>
<p>When is asymptotic analysis useless?
<div class="gap">
</div></p>
<p>The measured time to compute one SHA-256 hash on my EC2 node (2.5 GHz
processor) is 750 ns.  Approximately how many instructions execute to
compute on SHA-256 hash?
<div class="gap"></p>
</div>

<h1>Mining Cost</h1>
<p><strong>Assumption.</strong> SHA-256 produces a uniform random output.  (We know this
  is not really true, but it is a reasonable approximation, and
  necessary for the analysis.)  So, we can model SHA-256 on any (new)
  input <span class="math"><em>x</em></span> as drawing randomly from 2<sup>256</sup> possible outputs:</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SHA-256(<span class="math"><em>x</em>) &larr; [0, 2<sup>256</sup>)</p>
<p><span class="math">Target = T<sub>max</sub> / Difficulty</span><br />
<span class="math">T<sub>max</sub> = (2<sup>16</sup> – 1)2<sup>256<sup> &approx; 2<sup>224</sup></p>
<p>Current (15 Feb) Bitcoin Difficulty = 44,455,415,962</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">target</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">224</span> <span class="o">/</span> <span class="mi">44455415962</span>
<span class="mi">606449092506427232846302685260647042725721699378946247123L</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">success_probability</span> <span class="o">=</span> <span class="n">target</span> <span class="o">/</span> <span class="mi">2</span><span class="o">**</span><span class="mi">256</span>
<span class="mf">5.237396582969569e-21</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">expected_hashes</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">success_probability</span>
<span class="mf">1.9093455768686638e+20</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">nanos_needed</span> <span class="o">=</span> <span class="n">expected_hashes</span> <span class="o">*</span> <span class="mi">760</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">seconds_needed</span> <span class="o">=</span> <span class="n">nanos_needed</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span>
<span class="mf">145110263842018.44</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">days</span> <span class="o">=</span> <span class="n">seconds_needed</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
<span class="mf">1679516942.6159542</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">years</span> <span class="o">=</span> <span class="n">days</span> <span class="o">/</span> <span class="mi">365</span>
<span class="mf">4601416.2811396</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">years</span> <span class="o">*</span> <span class="mi">2</span>
<span class="o">~</span> <span class="mf">9.2</span> <span class="n">M</span> <span class="n">years</span> <span class="n">to</span> <span class="n">find</span> <span class="n">one</span> <span class="n">block</span> <span class="n">on</span> <span class="n">EC2</span> <span class="p">(</span><span class="n">assuming</span> <span class="n">difficulty</span> <span class="n">doesn</span><span class="err">’</span><span class="n">t</span> <span class="n">increase</span><span class="p">)</span>
</pre></div>


<h1>Energy</h1>
<p>Why is energy/hash so much less for custom ASICs? 
<div class="gap"></p>
</div>

<p>In an ASIC, it is possible to build an XOR using 4 transistors.  How
many transistors have to flip to do an XOR on a general purpose
processor like an Intel i7?
<div class="gap"></p>
</div>

<p><a href="https://en.bitcoin.it/wiki/Mining_hardware_comparison">Mining Hardware</a>
- current ASIC miners achive &gt;5 Billion hashes per seconds and over 1500
Million hashes per Joule (the energy required to lift an apple one
meter).</p>
<p><a href="http://www.thecoinsman.com/2014/08/bitcoin/inside-chinese-bitcoin-mine/"><em>Inside a Chinese Bitcoin Mine</em></a>, The Coinsman, 11 August 2014.</p>
<blockquote>
<p>The first thing you notice as you approach the warehouse is the noise. It begins as soon as you step out of the car, at which point it sounds like massive swarm of angry bees droning away somewhere off in the distance. It becomes louder and louder the closer you get to the building, and as you step through the doors it becomes a deafening and steady roar...</p>
</blockquote>
<p>Estimate for total energy use of bitcoin network with current hashrate:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">expected_hashes</span>
<span class="mf">1.9093455768686638e+20</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hashes_per_second</span> <span class="o">=</span> <span class="n">expected_hashes</span> <span class="o">/</span> <span class="mi">600</span>
<span class="mf">3.18224262811444e+17</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">309384699.96</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span> <span class="err">#</span> <span class="n">according</span> <span class="n">to</span> <span class="n">blockchain</span><span class="p">.</span><span class="n">info</span><span class="o">:</span> <span class="mi">309</span><span class="p">,</span><span class="mi">384</span><span class="p">,</span><span class="mf">699.96</span> <span class="n">GH</span><span class="o">/</span><span class="n">s</span>
<span class="mf">3.0938469996e+17</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_</span> <span class="o">/</span> <span class="n">hashes_per_second</span>
<span class="mf">0.9722222222361415</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Mhash_per_J</span> <span class="o">=</span> <span class="mi">1500</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Mhash_per_second</span> <span class="o">=</span> <span class="n">hashes_per_second</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">J</span> <span class="o">=</span> <span class="n">Mhash_per_second</span> <span class="o">/</span> <span class="n">Mhash_per_J</span>
<span class="mf">212149508.54096264</span>
</pre></div>


<p>212 MJ per second = 212 MW</p>
<p>Our nearest nuclear plant, the <a href="https://www.dom.com/corporate/what-we-do/electricity/generation/nuclear/north-anna-power-station">North Anna Power
Station</a>
(Lake Anna) generates 1892 MW, "enough to power 450,000 homes" or about
9x the amount needed to power the current bitcoin network (only counting
the miners themselves; additional power needed for cooling, etc.)</p>
<p>How does the energy use of bitcoin compare to what is used by the
current financial infrastructure for comparable service?  (This is a
very difficult question to answer, would be a good project idea, not
something to answer in the blank below!)</p>
<div class="gap">

</div></div>
<div class="commentstag"><a href="http://bitcoin-class.org/0/class-10-more-mining.html#disqus_thread" data-disqus-identifier="class-10-more-mining">Comments</a></div>
                   <hr />
        </div>

        <div class="article">
                   <a href="http://bitcoin-class.org/0/class-9-mining.html">Class 9: Mining</a> (Wed 11 February 2015)<br></br>

 <!--                  <div class="summary">
                        <a class="btn primary xsmall" href="http://bitcoin-class.org/0/class-9-mining.html">More...</a>                      
                   </div>-->
        </div>

        <div class="article">
                   <a href="http://bitcoin-class.org/0/project-2.html">Project 2</a> (Wed 11 February 2015)<br></br>

 <!--                  <div class="summary">
                        <a class="btn primary xsmall" href="http://bitcoin-class.org/0/project-2.html">More...</a>                      
                   </div>-->
        </div>

        <div class="article">
                   <a href="http://bitcoin-class.org/0/class-8-review-and-project-2.html">Class 8: Review and Project 2</a> (Mon 09 February 2015)<br></br>

 <!--                  <div class="summary">
                        <a class="btn primary xsmall" href="http://bitcoin-class.org/0/class-8-review-and-project-2.html">More...</a>                      
                   </div>-->
        </div>

        <div class="article">
                   <a href="http://bitcoin-class.org/0/starting-project-2.html">Starting Project 2</a> (Thu 05 February 2015)<br></br>

 <!--                  <div class="summary">
                        <a class="btn primary xsmall" href="http://bitcoin-class.org/0/starting-project-2.html">More...</a>                      
                   </div>-->
        </div>

        <div class="article">
                   <a href="http://bitcoin-class.org/0/class-7-merkle-trees.html">Class 7: Merkle Trees</a> (Wed 04 February 2015)<br></br>

 <!--                  <div class="summary">
                        <a class="btn primary xsmall" href="http://bitcoin-class.org/0/class-7-merkle-trees.html">More...</a>                      
                   </div>-->
        </div>

        <div class="article">
                   <a href="http://bitcoin-class.org/0/class-6-proofs-of-work.html">Class 6: Proofs of Work</a> (Mon 02 February 2015)<br></br>

 <!--                  <div class="summary">
                        <a class="btn primary xsmall" href="http://bitcoin-class.org/0/class-6-proofs-of-work.html">More...</a>                      
                   </div>-->
        </div>
        <hr />

        <div class="pagination">
        <ul>
                        <li class="prev"><a href="http://bitcoin-class.org/0/author/david-evans3.html">&larr; Previous</a></li>
                        <li class=""><a href="http://bitcoin-class.org/0/author/david-evans.html">1</a></li>
                        <li class=""><a href="http://bitcoin-class.org/0/author/david-evans2.html">2</a></li>
                        <li class=""><a href="http://bitcoin-class.org/0/author/david-evans3.html">3</a></li>
                        <li class="active"><a href="http://bitcoin-class.org/0/author/david-evans4.html">4</a></li>
                        <li class=""><a href="http://bitcoin-class.org/0/author/david-evans5.html">5</a></li>
                        <li class="next"><a href="http://bitcoin-class.org/0/author/david-evans5.html">Next &rarr;</a></li>
        </ul>
        </div>


<script type="text/javascript">
    var disqus_shortname = 'bitcoin-class';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
</script>

      <hr>

      <footer>
	<div id="footer">
        <address id="about">
          <a href="/">Cryptocurrency Cafe</a>, Spring 2015<br>      
          <a href="http://www.cs.virginia.edu">University of Virginia Computer Science</a><br>
	  <p align="right"><font color="grey" size="-2"> Site built using <a href="http://pelican.notmyidea.org/">Pelican</a>.  Theme uses <a href="http://twitter.github.com/bootstrap/">Bootstrap</a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome</a>.</p>
        </address><!-- /#about -->
	</div>
      </footer>

    </div><!--/.fluid-container-->


<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-3775212-12']);
_gaq.push(['_setDomainName', 'bitcoin-class.org']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript';
  ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
  'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s);
})();

</script>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://bitcoin-class.org/0/theme/js/jquery-1.7.2.min.js"></script>
    <script src="http://bitcoin-class.org/0/theme/js/bootstrap.min.js"></script>
  </body>
</html>